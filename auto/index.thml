<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>MIDI-CH Auto</title>
  <link href="../favicon.ico" rel="shortcut icon" type="image/x-icon" />
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <style media="screen">
    #FileDrop {
      position: relative;
      left: 0;
      width: 75%;
      height: 100px;
      border: 2px dashed black;
      color: black;
      margin: 20px auto;
    }

    #FileDrop.Hover {
      background-color: black;
      color: white;
    }

    #FileDrop input {
      position: absolute;
      width: 100%;
      height: 100%;
      opacity: 0;
      left: 0px;
      top: 0px;
    }

    #FileDrop #Text {
      position: absolute;
      width: 100%;
      height: 20px;
      line-height: 20px;
      left: 0px;
      top: 50%;
      transform: translate(0, -50%);
      text-align: center;
    }

    textarea {
      font-family: monospace;
      height: 300px;
      width: 100%;
      display: inline-block;
      position: relative;
      float: left;
    }

    #Results {
      position: relative;
      width: 100%;
      margin: 10px auto;
    }

    #container {
      position: fixed;
      width: 100%;
      left: 0;
      top: 0;
      height: 100%;
    }

    #htmlContent {
      visibility: hidden;
    }

    button {
      margin-bottom: 0.2em;
    }
  </style>
</head>

<body>
  <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/tone/13.0.1/Tone.min.js"></script>
  <script type="text/javascript" src="https://unpkg.com/@tonejs/midi"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.2.2/jszip.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/1.3.8/FileSaver.min.js"></script>

  <div id='container'>
    <h2 style="text-align:center;">Convert a .midi file for Clone Hero</h2>
    <h4 style="text-align:center;"><i>(may need to be manually cleaned up)</i></h4>
    <div id="FileDrop">
      <div id="Text">
        Drop a midi file here
      </div>
      <input type="file" accept="audio/midi">
    </div>
    <hr>
    <div style="margin:1em">
      <p>This assumes that the tracks of the MIDI corespond to the instruments to be charted. If there are multiple tracks for one instrument, mutiple instruments on one track, or there are lots of instruments, results will likely be poor.<br>For
        more control over some of these things, use <a href='https://efhiii.github.io/midi-ch/'>this version</a>.<br><br>An
        ideal MIDI has 2 Guitar channels, 1 Bass channel, 1 Piano/Organ channel, and 1 drums channel with any channels ommited (Channels with no notes are ommited). Lead Guitar, Rhythm Guitar, and Bass Guitar may get assigned to the wrong instrument
        which should be fixed manually.<br><br>If
        there are more than 4 non-percussion channels that have notes, instead of creating Full Difficulty, the different channels will be assigned to the various difficulties with a maximum of 16 channels. This is probably not what you want unless
        it's something like an orchestra piece, so channels that you don't want charted should be removed from the MIDI before hand.
      </p>
    </div>
    <div id='htmlContent' class='container'></div>
  </div>
  <!--p5.js code-->
  <script src="script.js" type="text/javascript"></script>
  <script>
    (function(i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r;
      i[r] = i[r] || function() {
        (i[r].q = i[r].q || []).push(arguments)
      }, i[r].l = 1 * new Date();
      a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
      a.async = 1;
      a.src = g;
      m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-104506442-1', 'auto');
    ga('send', 'pageview');
  </script>
</body>

</html>
